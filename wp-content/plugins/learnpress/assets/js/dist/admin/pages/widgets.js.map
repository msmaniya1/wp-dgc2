{"version":3,"file":"./assets/js/dist/admin/pages/widgets.js","mappings":";;;;;AAAA,MAAMA,CAAC,GAAGC,MAAV;;AAEA,SAASC,YAAT,CAAuBC,IAAvB,EAA8B;AAC7B,MAAKA,IAAI,CAACC,OAAV,EAAoB;AACnB,WAAOD,IAAI,CAACE,IAAZ;AACA;;AACD,QAAMC,MAAM,GAAG,8CAA8CH,IAAI,CAACI,EAAnD,GAAwD,KAAxD,GAAgEJ,IAAI,CAACK,KAAL,CAAWC,QAA3E,GAAsF,QAArG;AACA,SAAOH,MAAP;AACA;;AAED,SAASI,qBAAT,CAAgCP,IAAhC,EAAuC;AACtC,SAAOA,IAAI,CAACK,KAAL,CAAWC,QAAX,IAAuBN,IAAI,CAACE,IAAnC;AACA;;AAED,SAASM,kBAAT,GAA6C;AAAA,MAAhBC,MAAgB,uEAAP,IAAO;AAC5C,QAAMC,OAAO,GAAGb,CAAC,CAAE,0BAAF,CAAjB;AACA,QAAMc,SAAS,GAAGD,OAAO,CAACE,IAAR,CAAc,UAAd,CAAlB;AACA,QAAMC,QAAQ,GAAGH,OAAO,CAACE,IAAR,CAAc,WAAd,KAA+B,WAAhD;AAEAF,EAAAA,OAAO,CAACI,OAAR,CAAiB;AAChBC,IAAAA,IAAI,EAAE;AACLC,MAAAA,MAAM,EAAE,KADH;AAELC,MAAAA,GAAG,EAAEN,SAAS,GAAG,QAAZ,GAAuBE,QAFvB;AAGLK,MAAAA,QAAQ,EAAE,MAHL;AAILC,MAAAA,KAAK,EAAE,GAJF;;AAKLP,MAAAA,IAAI,CAAEQ,MAAF,EAAW;AACd,eAAO;AACNC,UAAAA,MAAM,EAAED,MAAM,CAACE;AADT,SAAP;AAGA,OATI;;AAULC,MAAAA,cAAc,CAAEX,IAAF,EAAQQ,MAAR,EAAiB;AAC9BA,QAAAA,MAAM,CAACI,IAAP,GAAcJ,MAAM,CAACI,IAAP,IAAe,CAA7B;AAEA,eAAO;AACNC,UAAAA,OAAO,EAAEb;AADH,SAAP;AAGA,OAhBI;;AAiBLc,MAAAA,KAAK,EAAE;AAjBF,KADU;;AAoBhBC,IAAAA,YAAY,CAAExB,MAAF,EAAW;AACtB,aAAOA,MAAP;AACA,KAtBe;;AAuBhByB,IAAAA,kBAAkB,EAAE,CAvBJ;AAwBhBC,IAAAA,cAAc,EAAE9B,YAxBA;AAwBc;AAC9B+B,IAAAA,iBAAiB,EAAEvB,qBAzBH,CAyB0B;;AAzB1B,GAAjB;AA2BA;;AAEDwB,QAAQ,CAACC,gBAAT,CAA2B,kBAA3B,EAA+C,UAAUC,KAAV,EAAkB;AAChE,MAAKF,QAAQ,CAACG,aAAT,CAAwB,iBAAxB,CAAL,EAAmD;AAClDrC,IAAAA,CAAC,CAAEkC,QAAF,CAAD,CAAcI,EAAd,CAAkB,cAAlB,EAAkC,UAAUF,KAAV,EAAiBxB,MAAjB,EAA0B;AAC3DD,MAAAA,kBAAkB,CAAEC,MAAF,CAAlB;AACA,KAFD;AAGA,GAJD,MAIO;AACNZ,IAAAA,CAAC,CAAEkC,QAAF,CAAD,CAAcI,EAAd,CAAkB,2BAAlB,EAA+C,YAAW;AACzD3B,MAAAA,kBAAkB;AAClB,KAFD;AAIAA,IAAAA,kBAAkB;AAClB;AACD,CAZD,E","sources":["webpack://learnpress/./assets/src/apps/js/admin/pages/widgets.js"],"sourcesContent":["const $ = jQuery;\n\nfunction formatCourse( repo ) {\n\tif ( repo.loading ) {\n\t\treturn repo.text;\n\t}\n\tconst markup = \"<div class='select2-result-course_title'>\" + repo.id + ' - ' + repo.title.rendered + '</div>';\n\treturn markup;\n}\n\nfunction formatCourseSelection( repo ) {\n\treturn repo.title.rendered || repo.text;\n}\n\nfunction autocompleteWidget( widget = null ) {\n\tconst searchs = $( '.lp-widget_select_course' );\n\tconst wpRestUrl = searchs.data( 'rest-url' );\n\tconst postType = searchs.data( 'post_type' ) || 'lp_course';\n\n\tsearchs.select2( {\n\t\tajax: {\n\t\t\tmethod: 'GET',\n\t\t\turl: wpRestUrl + 'wp/v2/' + postType,\n\t\t\tdataType: 'json',\n\t\t\tdelay: 250,\n\t\t\tdata( params ) {\n\t\t\t\treturn {\n\t\t\t\t\tsearch: params.term,\n\t\t\t\t};\n\t\t\t},\n\t\t\tprocessResults( data, params ) {\n\t\t\t\tparams.page = params.page || 1;\n\n\t\t\t\treturn {\n\t\t\t\t\tresults: data,\n\t\t\t\t};\n\t\t\t},\n\t\t\tcache: true,\n\t\t},\n\t\tescapeMarkup( markup ) {\n\t\t\treturn markup;\n\t\t},\n\t\tminimumInputLength: 2,\n\t\ttemplateResult: formatCourse, // omitted for brevity, see the source of this page\n\t\ttemplateSelection: formatCourseSelection, // omitted for brevity, see the source of this page\n\t} );\n}\n\ndocument.addEventListener( 'DOMContentLoaded', function( event ) {\n\tif ( document.querySelector( '#widgets-editor' ) ) {\n\t\t$( document ).on( 'widget-added', function( event, widget ) {\n\t\t\tautocompleteWidget( widget );\n\t\t} );\n\t} else {\n\t\t$( document ).on( 'learnpress/widgets/select', function() {\n\t\t\tautocompleteWidget();\n\t\t} );\n\n\t\tautocompleteWidget();\n\t}\n} );\n"],"names":["$","jQuery","formatCourse","repo","loading","text","markup","id","title","rendered","formatCourseSelection","autocompleteWidget","widget","searchs","wpRestUrl","data","postType","select2","ajax","method","url","dataType","delay","params","search","term","processResults","page","results","cache","escapeMarkup","minimumInputLength","templateResult","templateSelection","document","addEventListener","event","querySelector","on"],"sourceRoot":""}