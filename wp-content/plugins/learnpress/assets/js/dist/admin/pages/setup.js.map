{"version":3,"file":"./assets/js/dist/admin/pages/setup.js","mappings":"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","sources":["webpack://learnpress/./assets/src/apps/js/admin/pages/setup.js"],"sourcesContent":["( function( $ ) {\n\t'use strict';\n\tlet $main, $setupForm;\n\n\tconst checkForm = function checkForm( $form ) {\n\t\tconst $emails = $form.find( 'input[type=\"email\"]' );\n\t\tlet valid = true;\n\n\t\t$emails.each( function() {\n\t\t\tconst $this = $( this );\n\t\t\t$this.css( 'border-color', '' );\n\n\t\t\tswitch ( $this.attr( 'name' ) ) {\n\t\t\tcase 'settings[paypal][paypal_email]':\n\t\t\tcase 'settings[paypal][paypal_sandbox_email]':\n\t\t\t\tif ( ! $this.closest( 'tr' ).prev().find( 'input[type=\"checkbox\"]' ).is( ':checked' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif ( ! isEmail( this.value ) ) {\n\t\t\t\tvalid = false;\n\t\t\t\t$this.css( 'border-color', '#FF0000' );\n\t\t\t}\n\t\t} );\n\n\t\treturn valid;\n\t};\n\n\tconst blockContent = function blockContent( block ) {\n\t\t$main.toggleClass( 'loading', block === undefined ? true : block );\n\t};\n\n\tconst getFormData = function getFormData( more ) {\n\t\t$setupForm = $( '#learn-press-setup-form' );\n\t\tconst data = $setupForm.serializeJSON();\n\n\t\treturn $.extend( data, more || {} );\n\t};\n\n\tconst replaceMainContent = function replaceMainContent( newContent ) {\n\t\tconst $newContent = $( newContent );\n\t\t$main.replaceWith( $newContent );\n\t\t$main = $newContent;\n\t};\n\n\t/*const navPages = function navPages( e ) {\n\t\te.preventDefault();\n\n\t\tif ( ! checkForm( $setupForm ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst loadUrl = $( this ).attr( 'href' );\n\n\t\t$main.addClass( 'loading' );\n\t\t$.post( {\n\t\t\turl: loadUrl,\n\t\t\tdata: getFormData(),\n\t\t\tsuccess( res ) {\n\t\t\t\tconst $html = $( res );\n\t\t\t\treplaceMainContent( $html.contents().filter( '#main' ) );\n\n\t\t\t\tLP.setUrl( loadUrl );\n\n\t\t\t\t$( '.learn-press-dropdown-pages' ).LP( 'DropdownPages' );\n\t\t\t\t$( '.learn-press-tip' ).LP( 'QuickTip' );\n\t\t\t\t$main.removeClass( 'loading' );\n\t\t\t},\n\t\t} );\n\t};*/\n\n\tconst updateCurrency = function updateCurrency() {\n\t\tconst m = $( this ).children( ':selected' ).html().match( /\\((.*)\\)/ ),\n\t\t\tsymbol = m ? m[ 1 ] : '';\n\t\t$( '#currency-pos' ).children().each( function() {\n\t\t\tconst $option = $( this );\n\t\t\tlet text = $option.html();\n\n\t\t\tswitch ( $option.val() ) {\n\t\t\tcase 'left':\n\t\t\t\ttext = text.replace( /\\( (.*)69/, '( ' + symbol + '69' );\n\t\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\ttext = text.replace( /9([^0-9]*) \\)/, '9' + symbol + ' )' );\n\t\t\t\tbreak;\n\t\t\tcase 'left_with_space':\n\t\t\t\ttext = text.replace( /\\( (.*) 6/, '( ' + symbol + ' 6' );\n\t\t\t\tbreak;\n\t\t\tcase 'right_with_space':\n\t\t\t\ttext = text.replace( /9 (.*) \\)/, '9 ' + symbol + ' )' );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t$option.html( text );\n\t\t} );\n\t};\n\n\tconst updatePrice = function updatePrice() {\n\t\t$.post( {\n\t\t\turl: '',\n\t\t\tdataType: 'html',\n\t\t\tdata: getFormData( {\n\t\t\t\t'lp-ajax': 'get-price-format',\n\t\t\t} ),\n\t\t\tsuccess( res ) {\n\t\t\t\t$( '#preview-price' ).html( res );\n\t\t\t},\n\t\t} );\n\t};\n\n\tconst createPages = function createPages( e ) {\n\t\te.preventDefault();\n\t\tblockContent();\n\n\t\t$.post( {\n\t\t\turl: $( this ).attr( 'href' ),\n\t\t\tdataType: 'html',\n\t\t\tdata: getFormData( {\n\t\t\t\t'lp-ajax': 'setup-create-pages',\n\t\t\t} ),\n\t\t\tsuccess( res ) {\n\t\t\t\treplaceMainContent( $( res ).contents().filter( '#main' ) );\n\t\t\t\t$( '.learn-press-dropdown-pages' ).LP( 'DropdownPages' );\n\t\t\t\tblockContent( false );\n\t\t\t},\n\t\t} );\n\t};\n\n\tfunction isEmail( email ) {\n\t\tconst re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\treturn re.test( email );\n\t}\n\n\t$( function() {\n\t\t$main = $( '#main' );\n\t\t$setupForm = $( '#learn-press-setup-form' );\n\t\t$( '.learn-press-select2' ).select2();\n\n\t\t$( document ).\n\t\t\t// on( 'click', '.buttons .button', navPages ).\n\t\t\ton( 'change', '#currency', updateCurrency ).\n\t\t\ton( 'change', 'input, select', updatePrice ).\n\t\t\ton( 'click', '#create-pages', createPages );\n\t} );\n}( jQuery ) );\n"],"names":["$","$main","$setupForm","checkForm","$form","$emails","find","valid","each","$this","css","attr","closest","prev","is","isEmail","value","blockContent","block","toggleClass","undefined","getFormData","more","data","serializeJSON","extend","replaceMainContent","newContent","$newContent","replaceWith","updateCurrency","m","children","html","match","symbol","$option","text","val","replace","updatePrice","post","url","dataType","success","res","createPages","e","preventDefault","contents","filter","LP","email","re","test","select2","document","on","jQuery"],"sourceRoot":""}