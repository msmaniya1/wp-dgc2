{"version":3,"file":"./assets/js/dist/frontend/checkout.js","mappings":";;;;;AAAE,WAAUA,CAAV,EAAaC,QAAb,EAAwB;AACzB;;AAEA,MAAKC,MAAM,CAACC,EAAP,KAAcC,SAAnB,EAA+B;AAC9BF,IAAAA,MAAM,CAACC,EAAP,GAAY,EAAZ;AACA;AAED;AACD;AACA;AACA;AACA;;;AACC,QAAME,QAAQ,GAAGF,EAAE,CAACE,QAAH,GAAc,UAAUC,OAAV,EAAoB;AAClD,UAAMC,aAAa,GAAGP,CAAC,CAAE,4BAAF,CAAvB;AAAA,UAECQ,UAAU,GAAGR,CAAC,CAAE,6BAAF,CAFf;AAAA,UAICS,aAAa,GAAGT,CAAC,CAAE,gCAAF,CAJlB;AAAA,UAMCU,SAAS,GAAGV,CAAC,CAAE,kBAAF,CANd;AAAA,UAQCW,eAAe,GAAGX,CAAC,CAAE,mCAAF,CARpB;AAAA,UAUCY,cAAc,GAAGZ,CAAC,CAAE,2BAAF,CAVnB;AAYA,QAAIa,cAAc,GAAG,EAArB;;AAEA,QAAKC,MAAM,CAACC,SAAP,CAAiBC,OAAjB,KAA6BZ,SAAlC,EAA8C;AAC7CU,MAAAA,MAAM,CAACC,SAAP,CAAiBC,OAAjB,GAA2B,YAAW;AACrC,eAAO,IAAIC,MAAJ,CAAY,+GAAZ,EAA8HC,IAA9H,CAAoI,IAApI,CAAP;AACA,OAFD;AAGA;;AAED,UAAMC,WAAW,GAAG,YAAW;AAC9B,aAAOT,SAAS,CAACU,MAAV,GAAmB,CAA1B;AACA,KAFD;;AAIA,UAAMC,eAAe,GAAG,YAAW;AAClC,aAAOX,SAAS,CAACY,IAAV,CAAgB,sCAAhB,EAAyDC,GAAzD,EAAP;AACA,KAFD;;AAIA,UAAMC,UAAU,GAAG,YAAW;AAC7B,aAAOjB,aAAa,CAACe,IAAd,CAAoB,oDAApB,EAA2EF,MAA3E,GAAoF,CAA3F;AACA,KAFD;;AAIA,UAAMK,iBAAiB,GAAG,YAAW;AACpC,YAAMC,QAAQ,GAAGnB,aAAa,CAACe,IAAd,CAAoB,oDAApB,EAA2EC,GAA3E,EAAjB;AACA,YAAMI,KAAK,GAAG3B,CAAC,CAAE,uBAAuB0B,QAAzB,CAAf;AAEA,aAAOC,KAAK,CAACC,aAAN,EAAP;AACA,KALD;;AAOA,UAAMC,cAAc,GAAG,YAAW;AACjC,aAAO7B,CAAC,CAAE,mBAAF,CAAD,CAAyB4B,aAAzB,EAAP;AACA,KAFD;;AAIA,UAAME,cAAc,GAAG,YAAW;AACjC,aAAO9B,CAAC,CAAE,+BAAF,CAAD,CAAqC4B,aAArC,EAAP;AACA,KAFD;;AAIA,UAAMG,UAAU,GAAG,UAAUC,MAAV,EAAmB;AACrCC,MAAAA,WAAW,CAAED,MAAF,CAAX;AACA,YAAME,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAaJ,MAAb,EAAuB,CAAvB,CAAhB;AAEAhC,MAAAA,CAAC,CAAE,iBAAiBkC,OAAjB,GAA2B,YAA7B,CAAD,CAA6CG,OAA7C,CAAsD,OAAtD;AACA,KALD;;AAOA,UAAMC,WAAW,GAAG,UAAUC,CAAV,EAAc;AACjCA,MAAAA,CAAC,CAACC,cAAF;;AAEA,UAAKrB,WAAW,MAAM,CAAEE,eAAe,EAAvC,EAA4C;AAC3CY,QAAAA,WAAW,CAAE,8BAAF,EAAkC,IAAlC,CAAX;AACA,eAAO,KAAP;AACA;;AAED,UAAIQ,QAAQ,GAAG,EAAf;;AAEA,UAAK,CAAEjB,UAAU,EAAjB,EAAsB;AACrBiB,QAAAA,QAAQ,GAAGzC,CAAC,CAAC0C,MAAF,CAAUD,QAAV,EAAoBhB,iBAAiB,EAArC,EAAyCK,cAAc,EAAvD,CAAX;AACA;;AAEDW,MAAAA,QAAQ,GAAGzC,CAAC,CAAC0C,MAAF,CAAUD,QAAV,EAAoBZ,cAAc,EAAlC,CAAX;AAEAc,MAAAA,aAAa;AAEb,YAAMC,OAAO,GAAGjC,eAAe,CAACkC,IAAhB,EAAhB;AAEA,YAAMC,SAAS,GAAG,IAAIC,GAAJ,CAASzC,OAAO,CAAC0C,OAAjB,CAAlB;AACAF,MAAAA,SAAS,CAACG,YAAV,CAAuBC,GAAvB,CAA4B,SAA5B,EAAuC,UAAvC;AAEAlD,MAAAA,CAAC,CAACmD,IAAF,CAAQ;AACPC,QAAAA,GAAG,EAAEN,SADE;AAEPO,QAAAA,QAAQ,EAAE,MAFH;AAGPC,QAAAA,IAAI,EAAEb,QAHC;AAIPc,QAAAA,IAAI,EAAE,MAJC;;AAKPC,QAAAA,UAAU,GAAG;AACZxD,UAAAA,CAAC,CAAE,mCAAF,CAAD,CAAyCyD,QAAzC,CAAmD,SAAnD;AACA9C,UAAAA,eAAe,CAAC+C,IAAhB,CAAsBpD,OAAO,CAACqD,eAA9B;AACA,SARM;;AASPC,QAAAA,OAAO,CAAEC,QAAF,EAAa;AACnBA,UAAAA,QAAQ,GAAG1D,EAAE,CAAC2D,SAAH,CAAcD,QAAd,CAAX;;AAEA,cAAKA,QAAQ,CAACE,QAAd,EAAyB;AACxBhC,YAAAA,UAAU,CAAE8B,QAAQ,CAACE,QAAX,CAAV;AACA,WAFD,MAEO,IAAKF,QAAQ,CAACG,OAAd,EAAwB;AAC9B/B,YAAAA,WAAW,CAAE,4CAA4C4B,QAAQ,CAACG,OAArD,GAA+D,QAAjE,CAAX;AACA;;AAEDhE,UAAAA,CAAC,CAAE,mCAAF,CAAD,CAAyCiE,WAAzC,CAAsD,SAAtD;;AAEA,cAAK,cAAcJ,QAAQ,CAACK,MAA5B,EAAqC;AACpC,gBAAKL,QAAQ,CAACM,QAAT,IAAqBN,QAAQ,CAACM,QAAT,CAAkBC,KAAlB,CAAyB,QAAzB,CAA1B,EAAgE;AAC/DzD,cAAAA,eAAe,CAAC+C,IAAhB,CAAsBpD,OAAO,CAAC+D,gBAA9B;AACAnE,cAAAA,MAAM,CAACoE,QAAP,GAAkBT,QAAQ,CAACM,QAA3B;AACA;AACD,WALD,MAKO;AACNxD,YAAAA,eAAe,CAAC+C,IAAhB,CAAsBd,OAAtB;AACA;AACD,SA5BM;;AA6BP2B,QAAAA,KAAK,CAAEC,KAAF,EAASC,UAAT,EAAqBC,WAArB,EAAmC;AACvC1E,UAAAA,CAAC,CAAE,mCAAF,CAAD,CAAyCiE,WAAzC,CAAsD,SAAtD;AAEAhC,UAAAA,WAAW,CAAE,4CAA4CyC,WAA5C,GAA0D,QAA5D,CAAX;AAEA/D,UAAAA,eAAe,CAAC+C,IAAhB,CAAsBd,OAAtB;AAEAzC,UAAAA,EAAE,CAACwE,cAAH;AACA;;AArCM,OAAR;AAwCA,aAAO,KAAP;AACA,KAhED;;AAkEA,UAAMC,oBAAoB,GAAG,YAAW;AACvC,YAAMC,EAAE,GAAG7E,CAAC,CAAE,IAAF,CAAD,CAAUuB,GAAV,EAAX;AAAA,YACCuD,SAAS,GAAGpE,SAAS,CAACqE,QAAV,GAAqBC,MAArB,CAA6B,WAA7B,EAA2Cf,WAA3C,CAAwD,UAAxD,CADb;AAAA,YAECgB,UAAU,GAAGH,SAAS,CAACxD,IAAV,CAAgB,qBAAqBT,cAArC,EAAsDyC,IAAtD,CAA4D,mBAA5D,CAFd;AAIAwB,MAAAA,SAAS,CAACxD,IAAV,CAAgB,sBAAhB,EAAyC4D,OAAzC;AACAJ,MAAAA,SAAS,CAACK,GAAV,GAAgBH,MAAhB,CAAwB,iCAAiCH,EAAzD,EAA8DpB,QAA9D,CAAwE,UAAxE,EAAqFnC,IAArF,CAA2F,sBAA3F,EAAoH8D,IAApH,GAA2HC,SAA3H;AAEAxE,MAAAA,cAAc,GAAGiE,SAAS,CAACxD,IAAV,CAAgB,gBAAhB,EAAmCC,GAAnC,EAAjB;;AAEA,UAAK0D,UAAL,EAAkB;AACjBtE,QAAAA,eAAe,CAAC+C,IAAhB,CAAsBuB,UAAtB;AACA;AACD,KAbD;AAeA;AACF;AACA;AACA;;;AACE,UAAMK,mBAAmB,GAAG,YAAW;AACtC,YAAMC,UAAU,GAAGhF,aAAa,CAACiF,MAAd,GAAuBC,EAAvB,CAA2B,UAA3B,CAAnB;AACAjF,MAAAA,UAAU,CAACgF,MAAX,CAAmB,CAAED,UAArB;AACA9E,MAAAA,aAAa,CAAC+E,MAAd,CAAsB,CAAED,UAAxB;AAEAvF,MAAAA,CAAC,CAAE,oCAAF,CAAD,CAA0CwF,MAA1C,CAAkD,CAAED,UAApD;AACA,KAND;AAQA;AACF;AACA;AACA;AACA;AACA;;;AACE,UAAMtD,WAAW,GAAG,UAAU+B,OAAV,EAAkC;AAAA,UAAf0B,IAAe,uEAAR,KAAQ;AACrD/C,MAAAA,aAAa;;AAEb,UAAK3C,CAAC,CAAC2F,aAAF,CAAiB3B,OAAjB,CAAL,EAAkC;AACjC7B,QAAAA,MAAM,CAACC,IAAP,CAAa4B,OAAb,EAAuB4B,OAAvB,GAAiCC,OAAjC,CAA4ChB,EAAF,IAAU;AACnD,gBAAMiB,CAAC,GAAG9B,OAAO,CAAEa,EAAF,CAAjB;AACA,cAAIkB,GAAG,GAAGC,KAAK,CAACC,OAAN,CAAeH,CAAf,IAAqBA,CAAC,CAAE,CAAF,CAAtB,GAA8BA,CAAxC;AACA,gBAAMvC,IAAI,GAAGyC,KAAK,CAACC,OAAN,CAAeH,CAAf,IAAqBA,CAAC,CAAE,CAAF,CAAtB,GAA8B,EAA3C;AACAC,UAAAA,GAAG,GAAG,sCAAuC,OAASxC,IAAT,KAAoB,QAApB,GAA+BA,IAA/B,GAAsC,EAA7E,IAAoF,IAApF,GAA2FwC,GAA3F,GAAiG,QAAvG;AACAxF,UAAAA,aAAa,CAAC2F,OAAd,CAAuBH,GAAvB;AACA,SAND;AAQA;AACA;;AAED,UAAKL,IAAL,EAAY;AACX1B,QAAAA,OAAO,GAAG,sCAAuC,OAAS0B,IAAT,KAAoB,QAApB,GAA+BA,IAA/B,GAAsC,EAA7E,IAAoF,IAApF,GAA2F1B,OAA3F,GAAqG,QAA/G;AACA;;AAED,UAAKgC,KAAK,CAACC,OAAN,CAAejC,OAAf,CAAL,EAAgC;AAC/BA,QAAAA,OAAO,CAACmC,GAAR,CAAeJ,GAAF,IAAWxF,aAAa,CAAC2F,OAAd,CAAuB,4CAA4CH,GAA5C,GAAkD,QAAzE,CAAxB;AACA,OAFD,MAEO;AACNxF,QAAAA,aAAa,CAAC2F,OAAd,CAAuB,4CAA4ClC,OAA5C,GAAsD,QAA7E;AACA;;AAEDhE,MAAAA,CAAC,CAAE,YAAF,CAAD,CAAkBoG,OAAlB,CAA2B;AAC1BC,QAAAA,SAAS,EAAI9F,aAAa,CAAC+F,MAAd,GAAuBC,GAAvB,GAA6B;AADhB,OAA3B,EAEG,IAFH;AAIAvG,MAAAA,CAAC,CAAEwG,QAAF,CAAD,CAAcnE,OAAd,CAAuB,4BAAvB;AACA,KA9BD;AAgCA;AACF;AACA;AACA;AACA;;;AACE,UAAMoE,WAAW,GAAG,YAAW;AAC9B,UAAK,CAAE,KAAKC,KAAL,CAAW1F,OAAX,EAAP,EAA8B;AAC7B;AACA;;AAED,WAAK2F,KAAL,IAAcC,YAAY,CAAE,KAAKD,KAAP,CAA1B;AAEA/F,MAAAA,cAAc,CAAC6C,QAAf,CAAyB,SAAzB;AAEA,WAAKkD,KAAL,GAAaE,UAAU,CAAE,YAAW;AACnC7G,QAAAA,CAAC,CAAC8G,IAAF,CAAQ;AACP1D,UAAAA,GAAG,EAAElD,MAAM,CAACoE,QAAP,CAAgByC,IADd;AAEPzD,UAAAA,IAAI,EAAE;AACL,uBAAW,4BADN;AAEL0D,YAAAA,KAAK,EAAEpG,cAAc,CAACW,GAAf;AAFF,WAFC;;AAMPqC,UAAAA,OAAO,CAAEC,QAAF,EAAa;AACnB,kBAAMoD,GAAG,GAAG9G,EAAE,CAAC2D,SAAH,CAAcD,QAAd,CAAZ;AAEAjD,YAAAA,cAAc,CAACqD,WAAf,CAA4B,SAA5B;AAEAjE,YAAAA,CAAC,CAAE,2BAAF,CAAD,CAAiCkH,MAAjC;;AAEA,gBAAKD,GAAG,IAAIA,GAAG,CAACE,MAAhB,EAAyB;AACxBvG,cAAAA,cAAc,CAACwG,KAAf,CAAsBH,GAAG,CAACE,MAA1B;AACA;AACD;;AAhBM,SAAR;AAkBA,OAnBsB,EAmBpB,GAnBoB,CAAvB;AAoBA,KA7BD;AA+BA;AACF;AACA;;;AACE,UAAMxE,aAAa,GAAG,YAAW;AAChC3C,MAAAA,CAAC,CAAE,+DAAF,CAAD,CAAqEkH,MAArE;AACA,KAFD;AAIA;AACF;AACA;AACA;AACA;AACA;;;AACE,UAAMG,mBAAmB,GAAG,UAAU9E,CAAV,EAAaiD,MAAb,EAAsB;AACjDA,MAAAA,MAAM,GAAG/E,aAAa,CAACa,IAAd,CAAoB,4BAApB,EAAmDkE,MAAnD,CAA2DA,MAA3D,EAAoEC,EAApE,CAAwE,UAAxE,CAAT;AACAhF,MAAAA,aAAa,CAACa,IAAd,CAAoB,oDAApB,EAA2EkE,MAA3E,CAAmF,CAAEA,MAArF;AAEAjD,MAAAA,CAAC,KAAMA,CAAC,CAACC,cAAF,IAAoB8E,gBAAgB,CAAE,IAAF,EAAQ,CAAE9B,MAAV,CAA1C,CAAD;AACA,KALD;AAOA;AACF;AACA;AACA;AACA;AACA;AACA;;;AACE,UAAM8B,gBAAgB,GAAG,UAAU/E,CAAV,EAAaiD,MAAb,EAAsB;AAC9CA,MAAAA,MAAM,GAAGhF,UAAU,CAACc,IAAX,CAAiB,yBAAjB,EAA6CkE,MAA7C,CAAqDA,MAArD,EAA8DC,EAA9D,CAAkE,UAAlE,CAAT;AAEAjF,MAAAA,UAAU,CAACc,IAAX,CAAiB,iDAAjB,EAAqEkE,MAArE,CAA6E,CAAEA,MAA/E;AAEAjD,MAAAA,CAAC,KAAMA,CAAC,CAACC,cAAF,IAAoB6E,mBAAmB,CAAE,IAAF,EAAQ,CAAE7B,MAAV,CAA7C,CAAD;AACA,KAND;AAQA;AACF;AACA;;;AACE7E,IAAAA,eAAe,CAAC4G,EAAhB,CAAoB,OAApB,EAA6B,UAAUhF,CAAV,EAAc,CAE1C,CAFD;AAIAvC,IAAAA,CAAC,CAAE,2BAAF,CAAD,CAAiCuH,EAAjC,CAAqC,OAArC,EAA8CjC,mBAA9C;AACAtF,IAAAA,CAAC,CAAE,2CAAF,CAAD,CAAiDuH,EAAjD,CAAqD,OAArD,EAA8DjC,mBAA9D;AAEA1E,IAAAA,cAAc,CAAC2G,EAAf,CAAmB,eAAnB,EAAoCd,WAApC,EAAkDpE,OAAlD,CAA2D,SAA3D;AACA3B,IAAAA,SAAS,CAAC6G,EAAV,CAAc,eAAd,EAA+B,8BAA/B,EAA+D3C,oBAA/D;AACArE,IAAAA,aAAa,CAACgH,EAAd,CAAkB,QAAlB,EAA4BjF,WAA5B;AACA5B,IAAAA,SAAS,CAACqE,QAAV,CAAoB,WAApB,EAAkCzD,IAAlC,CAAwC,8BAAxC,EAAyEe,OAAzE,CAAkF,QAAlF;AACA7B,IAAAA,UAAU,CAAC+G,EAAX,CAAe,OAAf,EAAwB,6BAAxB,EAAuDD,gBAAvD;AACA7G,IAAAA,aAAa,CAAC8G,EAAd,CAAkB,OAAlB,EAA2B,gCAA3B,EAA6DF,mBAA7D;AAEA5G,IAAAA,aAAa,CAACa,IAAd,CAAoB,OAApB,EAA8BkG,IAA9B,CAAoC,YAAW;AAC9C,UAAO,CAAC,CAAD,KAAOxH,CAAC,CAACyH,OAAF,CAAWzH,CAAC,CAAE,IAAF,CAAD,CAAU0H,IAAV,CAAgB,MAAhB,EAAyBC,WAAzB,EAAX,EAAmD,CAAE,MAAF,EAAU,OAAV,EAAmB,QAAnB,CAAnD,CAAT,IAAiG3H,CAAC,CAAE,IAAF,CAAD,CAAUuB,GAAV,EAAtG,EAAwH;AACvH8F,QAAAA,mBAAmB;;AAEnB,eAAO,KAAP;AACA;AACD,KAND;AAQA7G,IAAAA,UAAU,CAACc,IAAX,CAAiB,4BAAjB,EAAgDkG,IAAhD,CAAsD,YAAW;AAChE,UAAO,CAAC,CAAD,KAAOxH,CAAC,CAACyH,OAAF,CAAWzH,CAAC,CAAE,IAAF,CAAD,CAAU0H,IAAV,CAAgB,MAAhB,EAAyBC,WAAzB,EAAX,EAAmD,CAAE,MAAF,EAAU,OAAV,EAAmB,QAAnB,CAAnD,CAAT,IAAiG3H,CAAC,CAAE,IAAF,CAAD,CAAUuB,GAAV,EAAtG,EAAwH;AACvH+F,QAAAA,gBAAgB;;AAEhB,eAAO,KAAP;AACA;AACD,KAND,EA1RkD,CAkSlD;;AACA,QAAK7G,aAAa,CAACW,MAAd,IAAwB,CAAEZ,UAAU,CAACY,MAA1C,EAAmD;AAClDiG,MAAAA,mBAAmB;AACnB,KAFD,MAEO,IAAK,CAAE5G,aAAa,CAACW,MAAhB,IAA0BZ,UAAU,CAACY,MAA1C,EAAmD;AACzDkG,MAAAA,gBAAgB;AAChB;;AAED/G,IAAAA,aAAa,CACXgH,EADF,CACM,QADN,EACgB,4CADhB,EAC8D,YAAW;AACvEvH,MAAAA,CAAC,CAAE,IAAF,CAAD,CAAU4H,IAAV,GAAiBtG,IAAjB,CAAuB,oCAAvB,EAA8DuG,KAA9D,GAAsExF,OAAtE,CAA+E,OAA/E;AACA,KAHF,EAIEkF,EAJF,CAIM,QAJN,EAIgB,cAJhB,EAIgC,YAAW;AACzChH,MAAAA,aAAa,CAACe,IAAd,CAAoB,YAApB,EAAmCC,GAAnC,CAAwC,KAAKmF,KAA7C;AACA,KANF,EAOEa,EAPF,CAOM,QAPN,EAOgB,YAPhB,EAO8B,YAAW;AACvChH,MAAAA,aAAa,CAACe,IAAd,CAAoB,cAApB,EAAqCC,GAArC,CAA0C,KAAKmF,KAA/C;AACA,KATF;AAWAG,IAAAA,UAAU,CAAE,YAAW;AACtBtG,MAAAA,aAAa,CAACe,IAAd,CAAoB,oCAApB,EAA2DuG,KAA3D,GAAmExF,OAAnE,CAA4E,OAA5E;AACA,KAFS,EAEP,GAFO,CAAV;AAGA,GAvTD;;AAyTArC,EAAAA,CAAC,CAAEwG,QAAF,CAAD,CAAcsB,KAAd,CAAqB,YAAW;AAC/B,QAAK,OAAOC,kBAAP,KAA8B,WAAnC,EAAiD;AAChD5H,MAAAA,EAAE,CAAC6H,SAAH,GAAe,IAAI3H,QAAJ,CAAc0H,kBAAd,CAAf;AACA;AACD,GAJD;AAKA,CA1UC,EA0UCE,MA1UD,CAAF,C","sources":["webpack://learnpress/./assets/src/apps/js/frontend/checkout.js"],"sourcesContent":["( function( $, settings ) {\n\t'use strict';\n\n\tif ( window.LP === undefined ) {\n\t\twindow.LP = {};\n\t}\n\n\t/**\n\t * Checkout\n\t *\n\t * @param  options\n\t */\n\tconst Checkout = LP.Checkout = function( options ) {\n\t\tconst $formCheckout = $( '#learn-press-checkout-form' ),\n\n\t\t\t$formLogin = $( '#learn-press-checkout-login' ),\n\n\t\t\t$formRegister = $( '#learn-press-checkout-register' ),\n\n\t\t\t$payments = $( '.payment-methods' ),\n\n\t\t\t$buttonCheckout = $( '#learn-press-checkout-place-order' ),\n\n\t\t\t$checkoutEmail = $( 'input[name=\"guest_email\"]' );\n\n\t\tlet selectedMethod = '';\n\n\t\tif ( String.prototype.isEmail === undefined ) {\n\t\t\tString.prototype.isEmail = function() {\n\t\t\t\treturn new RegExp( '^[-!#$%&\\'*+\\\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&\\'*+\\\\/0-9=?A-Z^_`a-z{|}~]+\\.[-!#$%&\\'*+\\\\./0-9=?A-Z^_`a-z{|}~]+$' ).test( this );\n\t\t\t};\n\t\t}\n\n\t\tconst needPayment = function() {\n\t\t\treturn $payments.length > 0;\n\t\t};\n\n\t\tconst selectedPayment = function() {\n\t\t\treturn $payments.find( 'input[name=\"payment_method\"]:checked' ).val();\n\t\t};\n\n\t\tconst isLoggedIn = function() {\n\t\t\treturn $formCheckout.find( 'input[name=\"checkout-account-switch-form\"]:checked' ).length = 0;\n\t\t};\n\n\t\tconst getActiveFormData = function() {\n\t\t\tconst formName = $formCheckout.find( 'input[name=\"checkout-account-switch-form\"]:checked' ).val();\n\t\t\tconst $form = $( '#checkout-account-' + formName );\n\n\t\t\treturn $form.serializeJSON();\n\t\t};\n\n\t\tconst getPaymentData = function() {\n\t\t\treturn $( '#checkout-payment' ).serializeJSON();\n\t\t};\n\n\t\tconst getPaymentNote = function() {\n\t\t\treturn $( '.learn-press-checkout-comment' ).serializeJSON();\n\t\t};\n\n\t\tconst showErrors = function( errors ) {\n\t\t\tshowMessage( errors );\n\t\t\tconst firstId = Object.keys( errors )[ 0 ];\n\n\t\t\t$( 'input[name=\"' + firstId + '\"]:visible' ).trigger( 'focus' );\n\t\t};\n\n\t\tconst _formSubmit = function( e ) {\n\t\t\te.preventDefault();\n\n\t\t\tif ( needPayment() && ! selectedPayment() ) {\n\t\t\t\tshowMessage( 'Please select payment method', true );\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet formData = {};\n\n\t\t\tif ( ! isLoggedIn() ) {\n\t\t\t\tformData = $.extend( formData, getActiveFormData(), getPaymentNote() );\n\t\t\t}\n\n\t\t\tformData = $.extend( formData, getPaymentData() );\n\n\t\t\tremoveMessage();\n\n\t\t\tconst btnText = $buttonCheckout.text();\n\n\t\t\tconst urlHandle = new URL( options.ajaxurl );\n\t\t\turlHandle.searchParams.set( 'lp-ajax', 'checkout' );\n\n\t\t\t$.ajax( {\n\t\t\t\turl: urlHandle,\n\t\t\t\tdataType: 'html',\n\t\t\t\tdata: formData,\n\t\t\t\ttype: 'POST',\n\t\t\t\tbeforeSend() {\n\t\t\t\t\t$( '#learn-press-checkout-place-order' ).addClass( 'loading' );\n\t\t\t\t\t$buttonCheckout.html( options.i18n_processing );\n\t\t\t\t},\n\t\t\t\tsuccess( response ) {\n\t\t\t\t\tresponse = LP.parseJSON( response );\n\n\t\t\t\t\tif ( response.messages ) {\n\t\t\t\t\t\tshowErrors( response.messages );\n\t\t\t\t\t} else if ( response.message ) {\n\t\t\t\t\t\tshowMessage( '<div class=\"learn-press-message error\">' + response.message + '</div>' );\n\t\t\t\t\t}\n\n\t\t\t\t\t$( '#learn-press-checkout-place-order' ).removeClass( 'loading' );\n\n\t\t\t\t\tif ( 'success' === response.result ) {\n\t\t\t\t\t\tif ( response.redirect && response.redirect.match( /https?/ ) ) {\n\t\t\t\t\t\t\t$buttonCheckout.html( options.i18n_redirecting );\n\t\t\t\t\t\t\twindow.location = response.redirect;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$buttonCheckout.html( btnText );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror( jqXHR, textStatus, errorThrown ) {\n\t\t\t\t\t$( '#learn-press-checkout-place-order' ).removeClass( 'loading' );\n\n\t\t\t\t\tshowMessage( '<div class=\"learn-press-message error\">' + errorThrown + '</div>' );\n\n\t\t\t\t\t$buttonCheckout.html( btnText );\n\n\t\t\t\t\tLP.unblockContent();\n\t\t\t\t},\n\t\t\t} );\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst _selectPaymentChange = function() {\n\t\t\tconst id = $( this ).val(),\n\t\t\t\t$selected = $payments.children().filter( '.selected' ).removeClass( 'selected' ),\n\t\t\t\tbuttonText = $selected.find( '#payment_method_' + selectedMethod ).data( 'order_button_text' );\n\n\t\t\t$selected.find( '.payment-method-form' ).slideUp();\n\t\t\t$selected.end().filter( '#learn-press-payment-method-' + id ).addClass( 'selected' ).find( '.payment-method-form' ).hide().slideDown();\n\n\t\t\tselectedMethod = $selected.find( 'payment_method' ).val();\n\n\t\t\tif ( buttonText ) {\n\t\t\t\t$buttonCheckout.html( buttonText );\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Button to switch between mode login/register or place order\n\t\t * in case user is not logged in and guest checkout is enabled.\n\t\t */\n\t\tconst _guestCheckoutClick = function() {\n\t\t\tconst showOrHide = $formCheckout.toggle().is( ':visible' );\n\t\t\t$formLogin.toggle( ! showOrHide );\n\t\t\t$formRegister.toggle( ! showOrHide );\n\n\t\t\t$( '#learn-press-button-guest-checkout' ).toggle( ! showOrHide );\n\t\t};\n\n\t\t/**\n\t\t * Append messages into document.\n\t\t *\n\t\t * @param  message\n\t\t * @param  wrap\n\t\t */\n\t\tconst showMessage = function( message, wrap = false ) {\n\t\t\tremoveMessage();\n\n\t\t\tif ( $.isPlainObject( message ) ) {\n\t\t\t\tObject.keys( message ).reverse().forEach( ( id ) => {\n\t\t\t\t\tconst m = message[ id ];\n\t\t\t\t\tlet msg = Array.isArray( m ) ? m[ 0 ] : m;\n\t\t\t\t\tconst type = Array.isArray( m ) ? m[ 1 ] : '';\n\t\t\t\t\tmsg = '<div class=\"learn-press-message ' + ( typeof ( type ) === 'string' ? type : '' ) + '\">' + msg + '</div>';\n\t\t\t\t\t$formCheckout.prepend( msg );\n\t\t\t\t} );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( wrap ) {\n\t\t\t\tmessage = '<div class=\"learn-press-message ' + ( typeof ( wrap ) === 'string' ? wrap : '' ) + '\">' + message + '</div>';\n\t\t\t}\n\n\t\t\tif ( Array.isArray( message ) ) {\n\t\t\t\tmessage.map( ( msg ) => $formCheckout.prepend( '<div class=\"learn-press-message error\">' + msg + '</div>') );\n\t\t\t} else {\n\t\t\t\t$formCheckout.prepend( '<div class=\"learn-press-message error\">' + message + '</div>' );\n\t\t\t}\n\n\t\t\t$( 'html, body' ).animate( {\n\t\t\t\tscrollTop: ( $formCheckout.offset().top - 100 ),\n\t\t\t}, 1000 );\n\n\t\t\t$( document ).trigger( 'learn-press/checkout-error' );\n\t\t};\n\n\t\t/**\n\t\t * Callback function for guest email.\n\t\t *\n\t\t * @private\n\t\t */\n\t\tconst _checkEmail = function() {\n\t\t\tif ( ! this.value.isEmail() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.timer && clearTimeout( this.timer );\n\n\t\t\t$checkoutEmail.addClass( 'loading' );\n\n\t\t\tthis.timer = setTimeout( function() {\n\t\t\t\t$.post( {\n\t\t\t\t\turl: window.location.href,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\t'lp-ajax': 'checkout-user-email-exists',\n\t\t\t\t\t\temail: $checkoutEmail.val(),\n\t\t\t\t\t},\n\t\t\t\t\tsuccess( response ) {\n\t\t\t\t\t\tconst res = LP.parseJSON( response );\n\n\t\t\t\t\t\t$checkoutEmail.removeClass( 'loading' );\n\n\t\t\t\t\t\t$( '.lp-guest-checkout-output' ).remove();\n\n\t\t\t\t\t\tif ( res && res.output ) {\n\t\t\t\t\t\t\t$checkoutEmail.after( res.output );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}, 500 );\n\t\t};\n\n\t\t/**\n\t\t * Remove all messages\n\t\t */\n\t\tconst removeMessage = function() {\n\t\t\t$( '.learn-press-error, .learn-press-notice, .learn-press-message' ).remove();\n\t\t};\n\n\t\t/**\n\t\t * Callback function for showing/hiding register form.\n\t\t *\n\t\t * @param  e\n\t\t * @param  toggle\n\t\t */\n\t\tconst _toggleRegisterForm = function( e, toggle ) {\n\t\t\ttoggle = $formRegister.find( '.learn-press-form-register' ).toggle( toggle ).is( ':visible' );\n\t\t\t$formRegister.find( '.checkout-form-register-toggle[data-toggle=\"show\"]' ).toggle( ! toggle );\n\n\t\t\te && ( e.preventDefault(), _toggleLoginForm( null, ! toggle ) );\n\t\t};\n\n\t\t/**\n\t\t * Callback function for showing/hiding login form.\n\t\t *\n\t\t * @param  e      {Event}\n\t\t * @param  toggle {boolean}\n\t\t * @private\n\t\t */\n\t\tconst _toggleLoginForm = function( e, toggle ) {\n\t\t\ttoggle = $formLogin.find( '.learn-press-form-login' ).toggle( toggle ).is( ':visible' );\n\n\t\t\t$formLogin.find( '.checkout-form-login-toggle[data-toggle=\"show\"]' ).toggle( ! toggle );\n\n\t\t\te && ( e.preventDefault(), _toggleRegisterForm( null, ! toggle ) );\n\t\t};\n\n\t\t/**\n\t\t * Place order action\n\t\t */\n\t\t$buttonCheckout.on( 'click', function( e ) {\n\n\t\t} );\n\n\t\t$( '.lp-button-guest-checkout' ).on( 'click', _guestCheckoutClick );\n\t\t$( '#learn-press-button-cancel-guest-checkout' ).on( 'click', _guestCheckoutClick );\n\n\t\t$checkoutEmail.on( 'keyup changex', _checkEmail ).trigger( 'changex' );\n\t\t$payments.on( 'change select', 'input[name=\"payment_method\"]', _selectPaymentChange );\n\t\t$formCheckout.on( 'submit', _formSubmit );\n\t\t$payments.children( '.selected' ).find( 'input[name=\"payment_method\"]' ).trigger( 'select' );\n\t\t$formLogin.on( 'click', '.checkout-form-login-toggle', _toggleLoginForm );\n\t\t$formRegister.on( 'click', '.checkout-form-register-toggle', _toggleRegisterForm );\n\n\t\t$formRegister.find( 'input' ).each( function() {\n\t\t\tif ( ( -1 !== $.inArray( $( this ).attr( 'type' ).toLowerCase(), [ 'text', 'email', 'number' ] ) ) && $( this ).val() ) {\n\t\t\t\t_toggleRegisterForm();\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\n\t\t$formLogin.find( 'input:not([type=\"hidden\"])' ).each( function() {\n\t\t\tif ( ( -1 !== $.inArray( $( this ).attr( 'type' ).toLowerCase(), [ 'text', 'email', 'number' ] ) ) && $( this ).val() ) {\n\t\t\t\t_toggleLoginForm();\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\n\t\t// Show form if there is only one form Register or Login\n\t\tif ( $formRegister.length && ! $formLogin.length ) {\n\t\t\t_toggleRegisterForm();\n\t\t} else if ( ! $formRegister.length && $formLogin.length ) {\n\t\t\t_toggleLoginForm();\n\t\t}\n\n\t\t$formCheckout\n\t\t\t.on( 'change', 'input[name=\"checkout-account-switch-form\"]', function() {\n\t\t\t\t$( this ).next().find( 'input:not([type=\"hidden\"]):visible' ).first().trigger( 'focus' );\n\t\t\t} )\n\t\t\t.on( 'change', '#guest_email', function() {\n\t\t\t\t$formCheckout.find( '#reg_email' ).val( this.value );\n\t\t\t} )\n\t\t\t.on( 'change', '#reg_email', function() {\n\t\t\t\t$formCheckout.find( '#guest_email' ).val( this.value );\n\t\t\t} );\n\n\t\tsetTimeout( function() {\n\t\t\t$formCheckout.find( 'input:not([type=\"hidden\"]):visible' ).first().trigger( 'focus' );\n\t\t}, 300 );\n\t};\n\n\t$( document ).ready( function() {\n\t\tif ( typeof lpCheckoutSettings !== 'undefined' ) {\n\t\t\tLP.$checkout = new Checkout( lpCheckoutSettings );\n\t\t}\n\t} );\n}( jQuery ) );\n"],"names":["$","settings","window","LP","undefined","Checkout","options","$formCheckout","$formLogin","$formRegister","$payments","$buttonCheckout","$checkoutEmail","selectedMethod","String","prototype","isEmail","RegExp","test","needPayment","length","selectedPayment","find","val","isLoggedIn","getActiveFormData","formName","$form","serializeJSON","getPaymentData","getPaymentNote","showErrors","errors","showMessage","firstId","Object","keys","trigger","_formSubmit","e","preventDefault","formData","extend","removeMessage","btnText","text","urlHandle","URL","ajaxurl","searchParams","set","ajax","url","dataType","data","type","beforeSend","addClass","html","i18n_processing","success","response","parseJSON","messages","message","removeClass","result","redirect","match","i18n_redirecting","location","error","jqXHR","textStatus","errorThrown","unblockContent","_selectPaymentChange","id","$selected","children","filter","buttonText","slideUp","end","hide","slideDown","_guestCheckoutClick","showOrHide","toggle","is","wrap","isPlainObject","reverse","forEach","m","msg","Array","isArray","prepend","map","animate","scrollTop","offset","top","document","_checkEmail","value","timer","clearTimeout","setTimeout","post","href","email","res","remove","output","after","_toggleRegisterForm","_toggleLoginForm","on","each","inArray","attr","toLowerCase","next","first","ready","lpCheckoutSettings","$checkout","jQuery"],"sourceRoot":""}